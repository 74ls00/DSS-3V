https://radiokot.ru/forum/viewtopic.php?p=2558429#p2558429

Идентификация нужного режима работы индикаторов (будь то индикаторы с "общим анодом (ОА)", "общим катодом (ОК) или ОК, но без ULN2003 осуществляется всего лишь одним дополнительным резистором номиналом от 33К до 100К, который устанавливается на плату индикации (указанный провод как раз идет между "+" и "-", так что резистор можно просто припаять в любом месте).
Изображение
1. Стандартная схема включения (с ULN2003), индикаторы с ОК:
- вывод PB5 (KEYB) как в оригинале подтянут через резистор к +5В
- вывод РС3 (DATA) подтянут через резистор 33К-100К к общему проводу
- индикаторы и двухцветные светодиоды должны быть с общим катодом

2. Включение БЕЗ ULN2003, индикаторы с ОК:
- вывод PB5 (KEYB) как в оригинале подтянут через резистор к +5В
- вывод РС3 (DATA) подтянут через резистор 33К-100К к +5В
- индикаторы и двухцветные светодиоды должны быть с общим катодом

3. Включение индикаторов с ОА:
- вывод PB5 (KEYB) подтянут через резистор к общему проводу
- вывод РС3 (DATA) подтянут через резистор 33К-100К или к +5В или к общему проводу
- индикаторы и двухцветные светодиоды должны быть с общим анодом
- не забываем перевернуть все диоды на плате индикации!

Наличие резистора на выводе РС3 (DATA) в прошивках после 26.11.2015 обязательно. Его отсутствие может привести к непредсказуемому определению типа примененных индикаторов, что может выразится в отсутствии индикации или реакции на нажатия кнопок.
